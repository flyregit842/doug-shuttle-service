<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doug Shuttle Service - æ©Ÿå ´æ¥é€é ç´„</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: system-ui, sans-serif; background: #f5f5f5; padding: 20px; }
        .container { max-width: 600px; margin: 0 auto; background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .header { background: #667eea; color: white; padding: 20px; text-align: center; border-radius: 10px 10px 0 0; }
        .content { padding: 20px; }
        .step { display: none; }
        .step.active { display: block; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input, select, textarea { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; font-size: 16px; }
        .service-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px; }
        .service-card { padding: 20px; border: 2px solid #ddd; border-radius: 5px; text-align: center; cursor: pointer; }
        .service-card.selected { border-color: #667eea; background: #f0f4ff; }
        .btn { padding: 12px 24px; background: #667eea; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; }
        .btn:hover { background: #5a67d8; }
        .btn-outline { background: transparent; border: 2px solid #667eea; color: #667eea; }
        .btn-group { display: flex; gap: 10px; justify-content: center; margin-top: 20px; }
        .loading { display: none; text-align: center; color: #666; }
        .toast { position: fixed; top: 20px; right: 20px; padding: 15px; border-radius: 5px; z-index: 1000; }
        .toast-success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .toast-error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        @media (max-width: 600px) { .container { margin: 10px; } .btn-group { flex-direction: column; } }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Doug Shuttle Service</h1>
            <p>æ©Ÿå ´æ¥é€é ç´„ç³»çµ±</p>
        </div>
        
        <div class="content">
            <!-- æ­¥é©Ÿ1: é¸æ“‡æœå‹™ -->
            <div class="step active" id="step1">
                <h3>é¸æ“‡æœå‹™é …ç›®</h3>
                <div class="service-grid">
                    <div class="service-card" data-service="é€æ©Ÿ">
                        <h4>âœˆï¸ é€æ©Ÿ</h4>
                        <p>å‰å¾€æ©Ÿå ´</p>
                    </div>
                    <div class="service-card" data-service="æ¥æ©Ÿ">
                        <h4>ğŸ  æ¥æ©Ÿ</h4>
                        <p>æ©Ÿå ´å›ä¾†</p>
                    </div>
                    <div class="service-card" data-service="åŒ…è»Š">
                        <h4>ğŸš— åŒ…è»Š</h4>
                        <p>å®¢è£½è¡Œç¨‹</p>
                    </div>
                </div>
                <div class="btn-group">
                    <button class="btn" id="next1" disabled>ä¸‹ä¸€æ­¥</button>
                </div>
            </div>

            <!-- æ­¥é©Ÿ2: åŸºæœ¬è³‡è¨Š -->
            <div class="step" id="step2">
                <h3>åŸºæœ¬è³‡è¨Š</h3>
                <div class="form-group">
                    <label for="phone">æ‰‹æ©Ÿè™Ÿç¢¼ *</label>
                    <input type="tel" id="phone" placeholder="0912-345-678" required>
                    <div class="loading" id="loading">æŸ¥è©¢ä¸­...</div>
                </div>
                <div class="form-group">
                    <label for="name">å§“å *</label>
                    <input type="text" id="name" placeholder="ç‹ç¸½" required>
                </div>
                <div class="form-group">
                    <label for="company">å…¬å¸åç¨±</label>
                    <input type="text" id="company" placeholder="ABCç§‘æŠ€">
                </div>
                <div class="btn-group">
                    <button class="btn btn-outline" id="prev2">ä¸Šä¸€æ­¥</button>
                    <button class="btn" id="next2">ä¸‹ä¸€æ­¥</button>
                </div>
            </div>

            <!-- æ­¥é©Ÿ3: æ™‚é–“åœ°é» -->
            <div class="step" id="step3">
                <h3>æ™‚é–“èˆ‡åœ°é»</h3>
                <div class="form-group">
                    <label for="date">æœå‹™æ—¥æœŸ *</label>
                    <input type="date" id="date" required>
                </div>
                <div class="form-group">
                    <label for="time">å‡ºç™¼æ™‚é–“ *</label>
                    <input type="time" id="time" required>
                </div>
                <div class="form-group">
                    <label for="pickup">ä¸Šè»Šåœ°é» *</label>
                    <input type="text" id="pickup" placeholder="å°åŒ—è»Šç«™" required>
                </div>
                <div class="form-group">
                    <label for="dropoff">ä¸‹è»Šåœ°é» *</label>
                    <input type="text" id="dropoff" placeholder="æ¡ƒåœ’æ©Ÿå ´" required>
                </div>
                <div class="form-group">
                    <label for="remarks">å‚™è¨»</label>
                    <textarea id="remarks" placeholder="ç‰¹æ®Šéœ€æ±‚"></textarea>
                </div>
                <div class="btn-group">
                    <button class="btn btn-outline" id="prev3">ä¸Šä¸€æ­¥</button>
                    <button class="btn" id="next3">ä¸‹ä¸€æ­¥</button>
                </div>
            </div>

            <!-- æ­¥é©Ÿ4: ç¢ºèª -->
            <div class="step" id="step4">
                <h3>ç¢ºèªé ç´„è³‡è¨Š</h3>
                <div id="summary" style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin-bottom: 20px;">
                    <!-- ç¢ºèªè³‡è¨Š -->
                </div>
                <div class="btn-group">
                    <button class="btn btn-outline" id="prev4">è¿”å›ä¿®æ”¹</button>
                    <button class="btn" id="submit">ç¢ºèªé ç´„</button>
                </div>
            </div>

            <!-- å®Œæˆ -->
            <div class="step" id="complete" style="text-align: center;">
                <h2 style="color: #28a745;">ğŸ‰ é ç´„æˆåŠŸï¼</h2>
                <p>Emailç¢ºèªå·²ç™¼é€</p>
                <div class="btn-group">
                    <a href="query.html" class="btn">æŸ¥çœ‹é ç´„</a>
                    <button class="btn btn-outline" onclick="location.reload()">æ–°é ç´„</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        let selectedService = '';
        let formData = {};

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('date').min = today;
            
            // æœå‹™é¸æ“‡
            document.querySelectorAll('.service-card').forEach(card => {
                card.addEventListener('click', function() {
                    document.querySelectorAll('.service-card').forEach(c => c.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedService = this.dataset.service;
                    document.getElementById('next1').disabled = false;
                });
            });

            // æ‰‹æ©Ÿè™Ÿç¢¼æŸ¥è©¢
            let timeout;
            document.getElementById('phone').addEventListener('input', function() {
                clearTimeout(timeout);
                const phone = this.value.replace(/\D/g, '');
                if (phone.length >= 10) {
                    timeout = setTimeout(() => {
                        document.getElementById('loading').style.display = 'block';
                        setTimeout(() => {
                            document.getElementById('loading').style.display = 'none';
                            if (phone === '0912345678') {
                                document.getElementById('name').value = 'ç‹ç¸½';
                                document.getElementById('company').value = 'ABCç§‘æŠ€';
                                showToast('å·²å¸¶å…¥è³‡æ–™', 'success');
                            }
                        }, 500);
                    }, 300);
                }
            });

            // å°èˆª
            document.getElementById('next1').addEventListener('click', () => goToStep(2));
            document.getElementById('prev2').addEventListener('click', () => goToStep(1));
            document.getElementById('next2').addEventListener('click', () => goToStep(3));
            document.getElementById('prev3').addEventListener('click', () => goToStep(2));
            document.getElementById('next3').addEventListener('click', () => goToStep(4));
            document.getElementById('prev4').addEventListener('click', () => goToStep(3));
            document.getElementById('submit').addEventListener('click', submitForm);
        });

        function goToStep(step) {
            if (!validateStep()) return;
            
            document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
            document.getElementById('step' + step).classList.add('active');
            
            if (step === 4) generateSummary();
            currentStep = step;
        }

        function validateStep() {
            switch(currentStep) {
                case 1: return selectedService !== '';
                case 2: return document.getElementById('phone').value && document.getElementById('name').value;
                case 3: return document.getElementById('date').value && document.getElementById('time').value && 
                              document.getElementById('pickup').value && document.getElementById('dropoff').value;
            }
            return true;
        }

        function generateSummary() {
            const summary = document.getElementById('summary');
            summary.innerHTML = `
                <div><strong>æœå‹™ï¼š</strong> ${selectedService}</div>
                <div><strong>æ—¥æœŸï¼š</strong> ${document.getElementById('date').value}</div>
                <div><strong>æ™‚é–“ï¼š</strong> ${document.getElementById('time').value}</div>
                <div><strong>ä¸Šè»Šï¼š</strong> ${document.getElementById('pickup').value}</div>
                <div><strong>ä¸‹è»Šï¼š</strong> ${document.getElementById('dropoff').value}</div>
                <div><strong>è¯çµ¡ï¼š</strong> ${document.getElementById('name').value} (${document.getElementById('phone').value})</div>
            `;
        }

        function submitForm() {
            const btn = document.getElementById('submit');
            btn.disabled = true;
            btn.textContent = 'è™•ç†ä¸­...';
            
            setTimeout(() => {
                document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
                document.getElementById('complete').classList.add('active');
                showToast('é ç´„å»ºç«‹æˆåŠŸ', 'success');
            }, 1500);
        }

        function showToast(message, type) {
            // ç§»é™¤èˆŠçš„toast
            const existingToast = document.querySelector('.toast');
            if (existingToast) {
                existingToast.remove();
            }
            
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            toast.textContent = message;
            document.body.appendChild(toast);
            
            // 3ç§’å¾Œè‡ªå‹•ç§»é™¤
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.remove();
                }
            }, 3000);
        }

        // é™¤éŒ¯ç”¨ï¼šæª¢æŸ¥æ‰€æœ‰äº‹ä»¶æ˜¯å¦æ­£ç¢ºç¶å®š
        function debugEvents() {
            console.log('Selected Service:', selectedService);
            console.log('Current Step:', currentStep);
            console.log('Service Cards:', document.querySelectorAll('.service-card').length);
            console.log('Buttons:', {
                next1: document.getElementById('next1'),
                prev2: document.getElementById('prev2'),
                next2: document.getElementById('next2'),
                prev3: document.getElementById('prev3'),
                next3: document.getElementById('next3'),
                prev4: document.getElementById('prev4'),
                submit: document.getElementById('submit')
            });
        }

        // åœ¨æ§åˆ¶å°è¼¸å…¥ debugEvents() ä¾†æª¢æŸ¥ç‹€æ…‹
    </script>
</body>
</html>
